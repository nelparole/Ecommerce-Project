<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Website with Bootstrap</title>
    <!-- Link to Bootstrap CSS via CDN -->
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

       <!--=============== BOXICONS ===============-->
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">

       <!--=============== SWIPER CSS ===============-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
   
       <!--=============== CSS ===============-->
       <link rel="stylesheet" href="style.css">
       <link rel="stylesheet" href="assets/css/colors/color-1.css">
</head>
<body>
    <header class="header" id="header">
        <nav class="nav container">
            <a href="index.html" class="nav_logo">
                <li class="bx bxs-shopping-bags nav_logo-icon"></li> NYP-Store
            </a>
            
            <div class="nav_menu" id="nav-menu">
                <ul class="nav_list">
                    <li class="nav_item">
                        <a href="index.html" class="nav_link active-link">Home</a>
                    </li>
                    <li class="nav_item">
                        <a href="#" class="nav_link">My Cart</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav_link">Contact </a>
                    </li>
                </ul>
                <div class="nav_close" id="nav-close">
                    <i class="bx bx-x"></i>
                </div>
            </div>
            <div class="nav_btns">
                <div class="login_toggle" id="login-button">
                    <i class="bx bx-user"></i>
                </div>
                <div class="nav_shop" id="cart-shop">
                    <i class="bx bx-shopping-bag"></i>
                </div>
                <div class="nav_toggle" id="nav-toggle">
                    <i class="bx bx-grid-alt"></i>
                </div>
            </div>

        </nav>
    </header>

<main>
    <section id="my-Cart">
        <div class="cart" id="cart">
            <i class="bx bx-x cart_close" id="cart-close"></i>
            <h2 class="cart_title-center"> My Cart</h2>
            <div class="cart_container" id="cart-container"></div>
            <div class="cart_prices">
                <span class="cart_prices-item" id="cart-total-items">0 items</span>
                <span class="cart_prices-total" id="cart-total-price">$0</span>
            </div>
        </div>
    </section>
    
    
    <section id="my-Login">
        <div class="login" id="login">
            <i class="bx bx-x login_close" id="login-close"></i>
            <h2 class="login_title-center">Login</h2>
            <form action="" class="login_form grid">
                <div class="login_content">
                    <label for="email" class="login_label">Email</label>
                    <input type="email" id="email" name="email" class="login_input">
                </div>

                <div class="login_content">
                    <label for="password" class="login_label">Password</label>
                    <input type="password" id="password" name="password" class="login_input">
                </div>
                
                <div>
                    <a href="#" class="button">Sign in</a>
                </div>

                <div>
                    <p class="signup">Not a member? <a href="registration.html">Sign up!</a></p>
                </div>
            </form>
        </div>
    </section>
    
    <section id="home_container" >
        <div class="swiper home-swiper container">
            <div class="swiper-wrapper" id="swiper-wrapper"></div>
            <div class="swiper-pagination"></div>
        </div>
    </section>
     
    <section class="discount section">
        <div class="discount_container container grid">
            <img src="assets/img/discount.png" alt="" class="discount_img">

            <div class="discount_data">
                <h2 class="discount_title">50% Discount <br> On new Products</h2>
                <a href="#" class="button">Go to new</a>
            </div>
        </div>
    </section>


    <section class="new section">
        <h2 class="section__title">Grab the Item on Sale<br> for Nearly 50% Off</h2>
        <div class="new_container container">
            <div class="swiper new-swiper">
                <div class="swiper-wrapper">
                    <!-- New contents will be added dynamically -->
                </div>
            </div>
        </div>
    </section>

    <section class="step section container">
        <div class="step_bg">
            <h2 class="section_title text-center">Steps to Order Products <br> from NYP-Store</h2>
        
            <div class="steps_container grid">
                <!-- Step 1 -->
                <div class="steps_card">
                    <div class="steps_card-number">01</div>
                    <h3 class="steps_card-title">Explore Our Selection</h3>
                    <p class="steps_card-description">
                        Explore our wide range of product options to find exactly what you're looking for.
                    </p>
                </div>
                <!-- Step 2 -->
                <div class="steps_card">
                    <div class="steps_card-number">02</div>
                    <h3 class="steps_card-title">Complete Your Purchase</h3>
                    <p class="steps_card-description">
                        After placing your order, we swiftly proceed to the next step: shipping your items.
                    </p>
                </div>
                
                <!-- Step 3 -->
                <div class="steps_card">
                    <div class="steps_card-number">03</div>
                    <h3 class="steps_card-title">Receive Your Delivery</h3>
                    <p class="steps_card-description">
                        Our delivery process is seamless; your order is delivered directly to your doorstep.
                    </p>
                </div>
                
                
            </div>
        </div>
    </section>
    <section class="newsletter section">
        <div class="newsletter_container container">
            <h2 class="section_title">Our Newsletter</h2>
            <div class="newsletter_description">
                Receive promotions for new products and sales directly in your inbox.
            </div>
            <form action="" class="newsletter_form">
                <input type="text" placeholder="Enter your Email" class="newsletter_input">
                <button class="button">Join</button>
            </form>
        </div>
    </section>

  
</main>
<footer class="footer section">
    <div class="footer_container container grid">
        <!-- Footer content 1-->
        <div class="footer_content">
            <a href="#" class="footer_logo">
                <i class="bx bxs-shopping-bags footer_logo-icon"></i>NYP-Store
            </a>
            <p class="footer_description">Experience the sale of a lifetime. <br> of your life.</p>
            <div class="footer_social">
                <a href="#" class="footer_social-link"><i class="bx bxl-facebook"></i></a>
                <a href="#" class="footer_social-link"><i class="bx bxl-instagram"></i></a>
                <a href="#" class="footer_social-link"><i class="bx bxl-linkedin"></i></a>
            </div>
        </div>
        <!-- Footer content 2-->
        <div class="footer_content">
            <h3 class="footer_title">About</h3>
            <ul class="footer_links">
                <li><a href="#" class="footer_link">About Us</a></li>
                <li><a href="#" class="footer_link">Customer Support</a></li>
                <li><a href="#" class="footer_link">Support Center</a></li>
            </ul>
        </div>
        <!-- Footer content 3-->
        <div class="footer_content">
            <h3 class="footer_title">Our Services</h3>
            <ul class="footer_links">
                <li><a href="#" class="footer_link">Shop</a></li>
                <li><a href="#" class="footer_link">Discount</a></li>
                <li><a href="#" class="footer_link">Shipping mode</a></li>
            </ul>
        </div>
        <!-- Footer content 4-->
        <div class="footer_content">
            <h3 class="footer_title">Our Company</h3>
            <ul class="footer_links">
                <li><a href="#" class="footer_link">Register</a></li>
                <li><a href="#" class="footer_link">Contact us</a></li>
                <li><a href="#" class="footer_link">About us</a></li>
            </ul>
        </div>

    </div>
    <span class="footer_copy">&#169; 2024. All rights reserved</span>
</footer>

<!-- scroll up-->
<a href="#" class="scrollup" id="scroll-up">
    <i class="bx bx-up-arrow-alt scroll_icon"></i>
</a>
   
<!--  <footer class="bg-dark text-light py-3">
        <div class="container">
            <p>&copy; 2024 Responsive Website. All rights reserved.</p>
        </div>
    </footer> -->
  

    <!-- Link to Bootstrap JS via CDN (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <!--=============== JS ===============-->
    <script src="assets/js/main.js"></script>
    <script>// Fetch products from API and render top rated products
       // Fetch products from API and render top rated products
fetch('https://fakestoreapi.com/products')
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
        
    })
    .then(products => {
        const topCountProducts = getTopCountProducts(products, 10);
        renderProducts(topCountProducts);
        
        // Find the product with the lowest price
        const productWithLowestPrice = findProductWithLowestPrice(products);
        populateDiscountSection(productWithLowestPrice);

        const top5Products = products.slice(0, 3); // Get the top 5 products
        renderCartItems(top5Products); // Pass top 5 products to the render function
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
        // Handle the error gracefully
    });

// Function to get top count products
function getTopCountProducts(products, count) {
    // Sort the products by count in descending order
    const sortedProducts = products.sort((a, b) => b.count - a.count);
    // Get the top 'count' products
    return sortedProducts.slice(0, count);
}

// Function to render products
function renderProducts(products) {
    const swiperWrapper = document.querySelector('.swiper-wrapper');
    // Clear existing content
    swiperWrapper.innerHTML = '';

    // Iterate over the products and generate HTML for each slide
    products.forEach((product, index) => {
        // Shorten the title to a desired length
        const shortenedTitle = truncateString(product.title, 20); // Adjust the length as needed
        // Shorten the description to 100 characters
        const shortenedDescription = truncateString(product.description, 200);

        const slideHTML = `
            <section class="swiper-slide">
                <div class="home_content grid">
                    <div class="home_group">
                        <img src="${product.image}" alt="${product.title}" class="home_img">
                        <div class="home_indicator"></div>
                        <div class="home_details-img">
                            <h4 class="home_details-title">${shortenedTitle}</h4>
                            <span class="home_details-subtitle">${product.category}</span>
                        </div>
                    </div>
                    <div class="home_data">
                        <h3 class="home_subtitle">#${index + 1} Trending Item</h3>
                        <h1 class="home_title">${shortenedTitle}</h1>
                        <p class="home_description">${shortenedDescription}</p>
                        <div class="home_buttons">
                            <a href="#" class="button">Buy now</a>
                            <a href="#" class="button--link button--flex">View Details 
                                <i class="bx bx-right-arrow-alt button_icon"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        `;

        // Append slide HTML to the swiper wrapper
        swiperWrapper.innerHTML += slideHTML;
    });
}

// Function to truncate a string to a specified length
function truncateString(str, maxLength) {
    if (str.length > maxLength) {
        return str.substring(0, maxLength - 3) + '...'; // Append ellipsis if string is longer than maxLength
    }
    return str;
}

// Function to find the product with the lowest price
function findProductWithLowestPrice(products) {
    if (!products || products.length === 0) {
        return null; // Return null if there are no products
    }

    // Initialize with the first product as the one with the lowest price
    let lowestPriceProduct = products[0];

    // Iterate over the products to find the one with the lowest price
    for (let i = 1; i < products.length; i++) {
        if (products[i].price < lowestPriceProduct.price) {
            lowestPriceProduct = products[i];
        }
    }

    return lowestPriceProduct;
}

// Function to populate the discount section with the product with the lowest price
function populateDiscountSection(product) {
    if (!product) return;
    const discountContainer = document.querySelector('.discount_container');

    discountContainer.innerHTML = `
        <img src="${product.image}" alt="${product.title}" class="discount_img">
        <div class="discount_data">
            <h2 class="discount_title">Get the Lowest Price <br> ${product.category}</h2>
            <a href="#" class="button">Price: $ ${product.price}</a>
        </div>
    `;
}

// Function to render the cart items
function renderCartItems(products) {





    
    const cartContainer = document.getElementById('cart-container');
    const cartTotalItems = document.getElementById('cart-total-items');
    const cartTotalPrice = document.getElementById('cart-total-price');

    // Clear existing content
    cartContainer.innerHTML = '';
    let totalPrice = 0;

    // Loop through each product and generate HTML
    products.forEach(product => {
        const cartItemHTML = `
            <article class="cart_card">
                <div class="cart_box">
                    <img src="${product.image}" alt="${product.title}" class="cart_img">
                </div>
                <div class="cart_details">
                    <h3 class="cart_title">${product.title}</h3>
                    <span class="cart_price">$${product.price}</span>

                    <div class="cart_amount">
                            <div class="cart_amount-content">
                                <span class="cart_amount-box">
                                    <i class="bx bx-minus"></i>
                                </span>

                                <span class="cart_amount-number">1</span>

                                <span class="cart_amount-box">
                                    <i class="bx bx-plus"></i>
                                </span>
                            </div>
                            <i class="bx bx-trash-alt cart_amount-trash"></i>
                        </div>
                </div>
            </article>
        `;
        cartContainer.innerHTML += cartItemHTML;
        totalPrice += product.price;
    });

    // Update total items count and total price
    cartTotalItems.textContent = `${products.length} items`;
    cartTotalPrice.textContent = `$${totalPrice.toFixed(2)}`; // Format total price with 2 decimal places
}





document.addEventListener('DOMContentLoaded', function () {
    fetch('https://fakestoreapi.com/products')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(products => {
            populateNewArrivals(products.slice(10, 20)); // Get products from index 10 to index 19
            
        })
        .catch(error => {
            console.error('There was a problem with the fetch operation:', error);
            // Handle the error gracefully
        });

    function populateNewArrivals(products) {
        const newSwiperWrapper = document.querySelector('.new-swiper .swiper-wrapper');

        // Clear existing content
        newSwiperWrapper.innerHTML = '';

        // Infinite loop: concatenate products array with itself
        products = [...products, ...products];

        // Iterate over the products and generate HTML for each slide
        products.forEach(product => {
            // Limit title to 20 characters
            const truncatedTitle = product.title.length > 20 ? product.title.substring(0, 20) + '...' : product.title;

            const slideHTML = `
                <div class="new_content swiper-slide">
                    <div class="new_tag">-50%</div>
                    <img src="${product.image}" alt="${truncatedTitle}" class="new_img">
                    <h3 class="new_title">${truncatedTitle}</h3>
                    <span class="new_subtitle">${product.category}</span>
                    <div class="new_prices">
                        <span class="new_price">$${product.price.toFixed(2)}</span>
                        <span class="new_discount">$${(product.price * 2).toFixed(2)}</span>
                    </div>
                    <a href="#" class="button new_button">
                        <i class="bx bx-cart alt new_icon"></i>
                    </a>
                </div>
            `;

            // Append slide HTML to the swiper wrapper
            newSwiperWrapper.innerHTML += slideHTML;
        });

        // Initialize Swiper after adding new slides
        var mySwiper = new Swiper('.new-swiper', {
            // Common parameters
            spaceBetween: 16,
            centeredSlides: true,
            loop: true,

            // Responsive breakpoints
            breakpoints: {
                // when window width is >= 320px
                320: {
                    slidesPerView: 1,
                },
                // when window width is >= 480px
                480: {
                    slidesPerView: 2,
                },
                // when window width is >= 768px
                768: {
                    slidesPerView: 3,
                },
                // when window width is >= 992px
                992: {
                    slidesPerView: 3,
                },
                // when window width is >= 1200px
                1200: {
                    slidesPerView: 3,
                }
            }
        });
    }
});
</script>
<script>
    
</script>



